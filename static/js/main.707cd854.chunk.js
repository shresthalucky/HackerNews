(this.webpackJsonphackernews=this.webpackJsonphackernews||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),o=a.n(r),i=a(7),s=a(11),l=a(1),u=a(10),m=a(2),d=a(3);var f=function(e){return function(t){var a=t.isLoading,n=t.type,r=t.error,o=Object(d.a)(t,["isLoading","type","error"]);if(r)return c.a.createElement("div",{className:"error-message"},c.a.createElement("span",null,"Error Occured!"));if(!a)return c.a.createElement(e,o);switch(n){case"story":return c.a.createElement("div",{className:"loading-bar"},c.a.createElement("div",{className:"loading-bar__heading"}),c.a.createElement("div",{className:"loading-bar__description"}));case"comment":return c.a.createElement("div",{className:"loading-bar"},c.a.createElement("div",{className:"loading-bar__description"}));default:return c.a.createElement("div",null,"Loading...")}}};function E(e){if(!e.ok)throw Error(e);return e}var b="https://hacker-news.firebaseio.com/v0",O=function(e){return"".concat(b,"/item/").concat(e,".json")},h=function(e){return function(t){return t(function(e){return{type:"REQUEST_STORY",payload:e}}(e)),fetch(O(e)).then(E).then((function(e){return e.json()})).then((function(e){t({type:"SET_STORY",payload:e})}))}},j=a(5),p=a(8);var v=f((function(e){var t=e.data,a=(Object(d.a)(e,["data"]),Object(l.e)().storyId?c.a.createElement("h1",{className:"story__title"},c.a.createElement(s.b,{to:"/".concat(t.id)},t.title)):c.a.createElement("h2",{className:"story__title"},c.a.createElement(s.b,{to:"/".concat(t.id)},t.title)));return c.a.createElement("div",null,a,c.a.createElement("div",{className:"description story__description"},c.a.createElement("span",{className:"description__by"},c.a.createElement(p.d,null)," ",c.a.createElement("strong",null,t.by)),c.a.createElement("span",{className:"description__comments"},c.a.createElement(p.c,null)," ",t.kids?t.kids.length:"0"),c.a.createElement("span",{className:"description__time"},c.a.createElement(p.a,null)," ",new Date(1e3*t.time).toLocaleString()),c.a.createElement("span",{className:"description__permalink"},c.a.createElement("a",{href:t.url,target:"_new",title:t.title},c.a.createElement(p.b,null)))))}));var S=Object(i.b)((function(e,t){var a=e.story,n=t.id;return{storyDetail:a.storiesDetail[n]}}),(function(e){return{fetchStory:function(t){return e(h(t))}}}))((function(e){var t=e.fetchStory,a=e.id,r=e.storyDetail,o=Object(n.useState)(!0),i=Object(m.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)({}),d=Object(m.a)(u,2),f=d[0],E=d[1],b=Object(n.useState)(!1),O=Object(m.a)(b,2),h=O[0],p=O[1];return Object(n.useEffect)((function(){t(a).catch((function(){return p(!0)}))}),[a,t]),Object(n.useEffect)((function(){r&&(E(Object(j.a)({},r)),l(!1))}),[r]),c.a.createElement("div",{className:"story"},c.a.createElement(v,{type:"story",error:h,isLoading:s,data:f}))})),y=S;var _=f((function(e){var t=e.stories,a=Object(d.a)(e,["stories"]);return c.a.createElement("div",null,c.a.createElement("div",{className:"stories-list"},t.map((function(e){return c.a.createElement(y,{id:e,key:e})}))),c.a.createElement("button",{className:"btn stories-list__btn",onClick:a.handleLoadMoreStories,disabled:a.allStoriesLoaded},a.allStoriesLoaded?"No More Stories":"More Stories"))}));var g=Object(i.b)((function(e){var t=e.story;return{stories:t.stories,storiesDetail:t.storiesDetail}}),(function(e){return{fetchStories:function(){return e((function(e){return e({type:"REQUEST_STORIES"}),fetch("https://hacker-news.firebaseio.com/v0/topstories.json").then((function(e){return e.json()})).then((function(t){e({type:"SET_STORIES",payload:t})}))}))},fetchStory:function(t){return e(h(t))}}}))((function(e){var t=e.stories,a=(e.storiesDetail,e.fetchStories),r=(e.fetchStory,Object(d.a)(e,["stories","storiesDetail","fetchStories","fetchStory"]),Object(n.useState)(!0)),o=Object(m.a)(r,2),i=o[0],s=o[1],l=Object(n.useState)([]),f=Object(m.a)(l,2),E=f[0],b=f[1],O=Object(n.useState)(!0),h=Object(m.a)(O,2),j=h[0],p=h[1],v=Object(n.useState)(!1),S=Object(m.a)(v,2),y=S[0],g=S[1];Object(n.useEffect)((function(){a().catch((function(){return g(!0)}))}),[a]),Object(n.useEffect)((function(){t.length&&s(!1),b(Object(u.a)(t.slice(0,10)))}),[t]),Object(n.useEffect)((function(){t.length===E.length?p(!0):p(!1)}),[t,E]);var N=Object(n.useCallback)((function(){var e=E.length+10;b(Object(u.a)(t.slice(0,e)))}),[E,t]);return c.a.createElement(_,{type:"story",isLoading:i,error:y,stories:E,handleLoadMoreStories:N,allStoriesLoaded:j})})),N=a(45),k=a.n(N);var w=f((function(e){var t=e.data;return Object(d.a)(e,["data"]),c.a.createElement("div",{className:"comment"},c.a.createElement("div",{className:"description comment__description"},c.a.createElement("span",{className:"description__by"},c.a.createElement(p.d,null)," ",c.a.createElement("strong",null,t.by)),c.a.createElement("span",{className:"description__comments"},c.a.createElement(p.c,null)," ",t.kids?t.kids.length:"0"),c.a.createElement("span",{className:"description__time"},c.a.createElement(p.a,null)," ",new Date(1e3*t.time).toLocaleString())),k()(t.text))}));var D=Object(i.b)((function(e,t){var a=e.comment,n=t.id;return{commentDetail:a.comments[n]}}),(function(e){return{fetchComment:function(t){return e(function(e){return function(t){return fetch(O(e)).then(E).then((function(e){return e.json()})).then((function(e){t({type:"SET_COMMENT",payload:e})}))}}(t))}}}))((function(e){var t=e.fetchComment,a=e.id,r=e.commentDetail,o=(Object(d.a)(e,["fetchComment","id","commentDetail"]),Object(n.useState)(!0)),i=Object(m.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)({}),f=Object(m.a)(u,2),E=f[0],b=f[1],O=Object(n.useState)(!1),h=Object(m.a)(O,2),p=h[0],v=h[1];return Object(n.useEffect)((function(){t(a).catch((function(){return v(!0)}))}),[a,t]),Object(n.useEffect)((function(){r&&(b(Object(j.a)({},r)),l(!1))}),[r]),c.a.createElement("div",{className:"comment-wrapper"},c.a.createElement(w,{type:"comment",error:p,isLoading:s,data:E}),E.kids&&E.kids.map((function(e){return c.a.createElement(D,{id:e,key:e})})))})),T=D;var L=Object(i.b)((function(e){return{storiesDetail:e.story.storiesDetail}}))((function(e){var t=e.storiesDetail,a=Object(d.a)(e,["storiesDetail"]),r=Object(n.useState)([]),o=Object(m.a)(r,2),i=o[0],s=o[1],l=Object(n.useState)([]),f=Object(m.a)(l,2),E=f[0],b=f[1],O=Object(n.useState)(!0),h=Object(m.a)(O,2),j=h[0],p=h[1],v=a.match.params.storyId;Object(n.useEffect)((function(){var e=t[v];e&&s(e.kids)}),[t,v]),Object(n.useEffect)((function(){b(Object(u.a)(i.slice(0,1)))}),[i]),Object(n.useEffect)((function(){i.length===E.length?p(!0):p(!1)}),[i,E]);var y=Object(n.useCallback)((function(){var e=E.length+1;b(Object(u.a)(i.slice(0,e)))}),[E,i]);return c.a.createElement("div",null,c.a.createElement(S,{id:v}),E.map((function(e){return c.a.createElement(T,{id:e,key:e})})),c.a.createElement("div",{className:"detail-actions"},c.a.createElement("button",{className:"btn",onClick:y,disabled:j},j?"No More Comments":"More Comments")))}));var C=function(e){return function(t){return c.a.createElement("div",{className:"main-wrapper"},c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,c.a.createElement(s.b,{to:"/"},"HackerNews")))),c.a.createElement("main",null,c.a.createElement("div",{className:"container"},c.a.createElement(e,t))),c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"container"},c.a.createElement("span",{className:"footer__text"},"Built using ",c.a.createElement("a",{href:"https://github.com/HackerNews/API",target:"_new",title:"HackerNews API"},"HackerNews API")))))}},I=C(g),M=C(L);var R=function(){return c.a.createElement(s.a,{basename:"/HackerNews"},c.a.createElement(l.a,{exact:!0,path:"/",component:I}),c.a.createElement(l.a,{exact:!0,path:"/:storyId",component:M}))},x=a(46),H=a(9),P=a(14),U=Object(H.c)({story:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,stories:[],storiesDetail:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_STORIES":return Object(j.a)({},e,{isFetching:!0});case"SET_STORIES":return Object(j.a)({},e,{isFetching:!1,stories:Object(u.a)(t.payload)});case"SET_STORY":return Object(j.a)({},e,{storiesDetail:Object(j.a)({},e.storiesDetail,Object(P.a)({},t.payload.id,t.payload))});default:return e}},comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{comments:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COMMENT":return Object(j.a)({},e,{comments:Object(j.a)({},e.comments,Object(P.a)({},t.payload.id,t.payload))});default:return e}}}),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,B=Object(H.e)(U,A(Object(H.a)(x.a)));a(99),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:B},c.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,a){e.exports=a(100)},81:function(e,t){},99:function(e,t,a){}},[[47,1,2]]]);
//# sourceMappingURL=main.707cd854.chunk.js.map